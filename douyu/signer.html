<!DOCTYPE html><html><title>douyu</title><head> <script type="text/javascript" src="flashemu.js"></script> <script>"use strict";function sign(r,e,t){FlashEmu.BUILTIN="builtin.abc",FlashEmu.PLAYERGLOBAL="playerglobal.abc",FlashEmu.setGlobalFlags({enableDebug:!1,enableLog:!1,enableWarn:!1,enableError:!1});var l=new FlashEmu({readFile:function(r){return fetch(r).then(function(r){return r.arrayBuffer()}).then(function(r){return new Uint8Array(r).buffer})}});l.runSWF("douyu.swf",!1).then(function(){var n=l.getVM(),a=n.getProxy(l.getProperty("sample.mp","CModule")),o=n.getProxy(l.getPublicClass("mp"));a.callProperty("startAsync"),console.log("sign",r,e,t);var c=a.callProperty("malloc",4),i=a.callProperty("malloc",4),s=o.callProperty("sub_2",parseInt(r),parseInt(e),t.toString(),i,c),u=a.callProperty("read32",c),d=a.callProperty("readString",u,s),g=a.callProperty("read32",i),p=a.callProperty("readString",g,4);a.callProperty("free",c),a.callProperty("free",i),console.log("sign result",d,p);var y=new Object;y.sign=d,y.cptl=p;var f=JSON.stringify(y),b=document.createElement("div"),P=document.createTextNode(f);b.id="sign",b.appendChild(P),document.body.appendChild(b)})["catch"](function(r){return console.error(r)})}function getUrlVars(){var r={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,l){r[t]=l});return r}var rid=getUrlVars().rid,tt=getUrlVars().tt,did=getUrlVars().did;sign(rid,tt,did);</script> </head><body></body></html>